@layer reset, base, components;
@layer reset {
  *, *::before, *::after { box-sizing: border-box; margin:0; padding:0; }
}
@layer base {
  :root {
    --pad: env(safe-area-inset);
    --accent: #007BFF;
    --font-scale: 1;
  }
  body {
    font-family: 'Inter', system-ui, sans-serif;
    background:#fefefe;
    color:#123;
    padding:var(--pad);
    font-size:calc(1rem * var(--font-scale));
    scroll-behavior:smooth;
  }
  a { color:#036; }
  :focus-visible { outline:2px solid currentColor; }
  .skip { position:absolute; left:-999px; top:auto; width:1px; height:1px; overflow:hidden; }
  .skip:focus { position:static; width:auto; height:auto; }
  header {
    container-type:inline-size;
    position:relative;
    display:flex;
    align-items:center;
    justify-content:space-between;
  }
  nav { position:fixed; top:0; left:0; right:0; background:rgba(255,255,255,.8); backdrop-filter:blur(5px); }
  nav ul { list-style:none; margin:0; padding:1rem; display:flex; gap:1rem; }
  nav a { text-decoration:none; color:#014; }
  nav a[aria-current="page"] { font-weight:bold; text-decoration:underline; }
  #progressBar { position:fixed; inset:0 0 auto 0; height:4px; width:0; background:var(--accent); z-index:10; }
  /* Back to top button sits above the call FAB */
  #topBtn { right:1rem; bottom:5rem; }
  /* Use modern viewport units with fallback for older browsers */
  .hero {
    height:100dvh;
    height:calc(var(--vh,1vh) * 100);
    display:grid;
    place-items:center;
    text-align:center;
    position:relative;
  }
  @container size inline(700px) { .hero { height:70dvh; } }
  canvas { width:100%; height:100%; position:absolute; inset:0; }
  .cta { position:relative; padding:1rem 2rem; font-size:1.2rem; background:var(--accent); color:#fff; border:none; border-radius:.25rem; cursor:pointer; }
  .fab { position:fixed; right:1rem; bottom:1rem; background:var(--accent); color:#fff; border-radius:50%; width:56px; height:56px; display:flex; align-items:center; justify-content:center; font-size:1.5rem; cursor:pointer; }
}
@layer components {
  .fab { box-shadow:0 2px 5px rgba(0,0,0,.2); }
  #topBtn { display:none; }
  #navToggle { display:none; background:none; border:none; font-size:1.25rem; padding:.5rem; }
  #fontToggle { margin-left:.5rem; }
  @container (max-width: 600px) {
    #navToggle { display:block; }
    nav ul { display:none; position:absolute; top:100%; right:0; background:rgba(255,255,255,.95); flex-direction:column; padding:1rem; }
    header[data-menu='open'] nav ul { display:flex; }
  }
  @container style(--has-install: true) {
    #installBanner[hidden] { display:none; }
    #installBanner { position:fixed; bottom:1rem; left:50%; translate:-50% 0; }
  }
}

@media (prefers-reduced-motion: reduce) { canvas { display:none; } }
@media (forced-colors: active) { body { forced-color-adjust:none; } }
@media (prefers-contrast: more) {
  body { background:#fff; color:#000; }
  .cta, .fab { background:#000; color:#fff; }
}

@supports (animation-timeline: scroll()) {
  #progressBar {
    width:100%;
    transform-origin:left;
    animation: progress auto linear;
    animation-timeline: scroll(root block);
  }
  @keyframes progress { from { transform:scaleX(0); } to { transform:scaleX(1); } }
}
