<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- SEO & Social -->
  <meta name="description" content="Allied Construction is Chicago’s award‑winning design‑build firm for commercial, industrial & high‑end residential projects. Quality, safety, and sustainability—built into every square foot." />
  <meta property="og:title" content="Allied Construction | Building Your Vision" />
  <meta property="og:description" content="From skyscrapers to smart homes, we engineer the future of Chicagoland construction." />
  <meta property="og:image" content="https://source.unsplash.com/featured/1200x630?construction,Chicago" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://alliedconstruction.github.io/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="theme-color" content="#0A66C2" />
  <link rel="canonical" href="https://alliedconstruction.github.io/" />
  <!-- Apple PWA -->
  <link rel="apple-touch-icon" href="/icon.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <!-- CSP for security -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com https://cdnjs.cloudflare.com https://source.unsplash.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline'; img-src * data:; connect-src *; font-src https://fonts.gstatic.com https://cdnjs.cloudflare.com;"/>
  <!-- Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Allied Construction",
      "url": "https://alliedconstruction.github.io/",
      "logo": "/icon.png",
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-312-555-1234",
        "contactType": "customer service",
        "areaServed": "US-IL"
      },
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Chicago",
        "addressRegion": "IL",
        "addressCountry": "USA"
      }
    }
  </script>
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <!-- PWA Manifest (data URI) -->
  <link rel="manifest" href="data:application/manifest+json;base64,ew0KICAibmFtZSI6ICJBbGxpZWQgQ29uc3RydWN0aW9uIiwNCiAgInNob3J0X25hbWUiOiAiQWxsaWVkIiwNCiAgImljb24iOiAiL2ljb24ucG5nIiwNCiAgImJhY2tncm91bmRfY29sb3IiOiAiI2ZmZiIsDQogICJ0aGVtZV9jb2xvciI6ICIjMEE2NkMyIiwNCiAgInN0YXJ0X3VybCI6ICIuLyINCn0=">
  <style>
    /* ===== CSS Variables ===== */
    :root {
      --primary:#0A66C2; --primary-dark:#094b91; --accent:#F59E0B;
      --bg:#fafafa; --surface:#ffffff; --text:#111827; --gray:#f3f4f6;
      --radius:12px; --shadow:0 8px 22px rgba(0,0,0,.06);
      --font:'Poppins',sans-serif; --transition:.3s cubic-bezier(.4,0,.2,1);
      --scroll-height:4px;
    }
    @media(prefers-color-scheme:dark){:root:not(.light){--bg:#0f1116;--surface:#1a1d24;--text:#f1f3f9;--gray:#23262e;--shadow:0 8px 22px rgba(0,0,0,.45);}}
    :root.dark{--bg:#0f1116;--surface:#1a1d24;--text:#f1f3f9;--gray:#23262e;--shadow:0 8px 22px rgba(0,0,0,.45);}

    /* ===== Base Reset ===== */
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{font-family:var(--font);background:var(--bg);color:var(--text);line-height:1.6}
    img{display:block;max-width:100%}
    h2{font-size:clamp(1.8rem,2.5vw,2.4rem);margin-bottom:1rem;text-align:center;color:var(--primary-dark)}

    /* ===== Utilities ===== */
    .container{max-width:1200px;margin:auto;padding:1rem 1.5rem}
    .btn{display:inline-block;background:var(--primary);color:#fff;padding:.9rem 1.8rem;border-radius:var(--radius);font-weight:600;text-decoration:none;transition:background var(--transition)}
    .btn:hover{background:var(--primary-dark)}

    /* ===== Scroll Progress ===== */
    #progress{position:fixed;left:0;top:0;height:var(--scroll-height);background:var(--accent);width:0%;z-index:2000}

    /* ===== Header ===== */
    header{position:fixed;top:0;left:0;right:0;background:transparent;padding:.25rem 0;transition:background .25s ease,box-shadow .25s ease}
    header.scrolled{background:var(--surface);box-shadow:var(--shadow)}
    nav{display:flex;align-items:center;justify-content:space-between;min-height:64px}
    .logo{font-weight:800;font-size:1.35rem;color:var(--primary);letter-spacing:-.5px}
    nav ul{display:flex;list-style:none;gap:1.4rem}
    nav a{font-weight:600;text-decoration:none;color:var(--text);transition:color var(--transition)}
    nav a:hover,nav a.active{color:var(--primary)}
    .hamburger{display:none;font-size:1.6rem;cursor:pointer;background:none;border:none;color:var(--primary)}
    #themeToggle{margin-left:.75rem;background:none;border:none;font-size:1.5rem;color:var(--accent);cursor:pointer;transition:transform var(--transition)}
    #themeToggle:hover{transform:rotate(15deg)}
    @media(max-width:768px){nav ul{position:absolute;top:64px;left:0;width:100%;flex-direction:column;background:var(--surface);max-height:0;overflow:hidden;transition:max-height .35s ease;border-top:1px solid var(--gray)}nav ul.open{max-height:370px} .hamburger{display:block}}

    /* ===== Hero ===== */
    .hero{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:3rem;align-items:center;min-height:100vh;background:url('https://source.unsplash.com/1600x900?chicago-skyline') center/cover fixed;padding-top:6rem}
    .hero-overlay{background:rgba(0,0,0,.55);position:absolute;inset:0}
    .hero>*{position:relative;color:#fff}
    .hero h1{font-size:clamp(2.8rem,5vw,4.2rem);line-height:1.15;margin-bottom:1rem}
    .hero p{font-size:1.1rem;max-width:600px;margin-bottom:1.5rem}
    .stats{display:flex;flex-wrap:wrap;justify-content:center;gap:2.5rem;margin-top:2.5rem}
    .stat{text-align:center;min-width:120px}
    .stat strong{display:block;font-size:2.4rem;color:var(--accent)}

    /* ===== Wave ===== */
    .wave{display:block;width:100%;height:80px;line-height:0}
    .wave svg{width:100%;height:100%;fill:var(--surface)}

    /* ===== Services Cards ===== */
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.8rem;margin-top:2rem}
    .card{background:var(--surface);padding:2.2rem 1.8rem;border-radius:var(--radius);box-shadow:var(--shadow);text-align:center;transition:transform var(--transition),box-shadow var(--transition)}
    .card:hover{transform:translateY(-7px) scale(1.02);box-shadow:0 18px 36px rgba(0,0,0,.08)}
    .card i{font-size:2rem;color:var(--primary);margin-bottom:.75rem}

    /* ===== Awards ===== */
    .awards{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem;align-items:center;justify-items:center;margin-top:2rem;filter:grayscale(1);opacity:.8}
    .awards img{max-height:60px}

    /* ===== Process ===== */
    .process{background:var(--gray)}
    .steps{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.8rem;margin-top:2rem;counter-reset:step}
    .step{background:var(--surface);padding:2rem 1.6rem;border-radius:var(--radius);box-shadow:var(--shadow);position:relative}
    .step::before{counter-increment:step;content:counter(step);position:absolute;top:-18px;left:-18px;width:40px;height:40px;border-radius:50%;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:var(--shadow)}
    .step h3{margin-bottom:.5rem}

    /* ===== Gallery ===== */
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;margin-top:2rem}
    .gallery img{border-radius:var(--radius);object-fit:cover;aspect-ratio:4/3;cursor:zoom-in;transition:transform var(--transition)}
    .gallery img:hover{transform:scale(1.05)}

    /* ===== Lightbox ===== */
    #lightbox{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn .3s ease-out}
    #lightbox img{max-width:92%;max-height:92%;border-radius:var(--radius);box-shadow:var(--shadow);cursor:zoom-out}
    #close{position:absolute;top:1.4rem;right:2rem;font-size:2rem;color:#fff;cursor:pointer}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}

    /* ===== Testimonials ===== */
    .testimonials{background:var(--gray)}
    .carousel{display:flex;gap:1.5rem;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:.5rem;-webkit-overflow-scrolling:touch}
    .carousel::-webkit-scrollbar{display:none}
    .carousel .card{min-width:280px;scroll-snap-align:start}
    blockquote{font-style:italic;margin-bottom:1rem;position:relative;padding-left:1.5rem}
    blockquote::before{content:"\f10d";font-family:"Font Awesome 6 Free";font-weight:900;position:absolute;left:0;top:0;color:var(--primary)}

    /* ===== FAQ & Contact same as before... (kept) */
    .faq details{background:var(--surface);margin-bottom:1rem;padding:1rem 1.25rem;border-radius:var(--radius);box-shadow:var(--shadow)}
    .faq summary{cursor:pointer;font-weight:600;list-style:none;position:relative;padding-right:1.5rem}
    .faq summary::after{content:"\f078";font-family:"Font Awesome 6 Free";font-weight:900;position:absolute;right:0;transition:transform var(--transition)}
    .faq details[open] summary::after{transform:rotate(180deg)}

    .call{position:relative;overflow:hidden;background:linear-gradient(135deg,var(--primary)0%,var(--primary-dark)100%);color:#fff;text-align:center;border-radius:var(--radius);padding:3rem 1rem;margin-top:2rem}
    .call::before{content:"";position:absolute;inset:0;background:hsla(0,0%,100%,.05);transform:skewY(-6deg)}
    .call h2{font-size:clamp(1.8rem,3vw,2.4rem);margin-bottom:1rem}

    /* ===== Sticky Mobile CTA ===== */
    #stickyCTA{position:fixed;bottom:0;left:0;right:0;background:var(--primary);color:#fff;display:none;align-items:center;justify-content:space-between;padding:.75rem 1rem;z-index:1500}
    #stickyCTA a{color:#fff;font-weight:600}
    @media(max-width:640px){#stickyCTA{display:flex}}

    /* ===== Back-to-top ===== */
    #topBtn{position:fixed;bottom:24px;right:24px;background:var(--primary);color:#fff;border:none;border-radius:50%;width:48px;height:48px;font-size:1.25rem;display:none;align-items:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow);transition:background var(--transition)}
    #topBtn:hover{background:var(--primary-dark)}
    #topBtn.show{display:flex}

    /* ===== Reveal ===== */
    [data-animate]{opacity:0;transform:translateY(40px);transition:opacity .6s ease,transform .6s ease}
    [data-animate].show{opacity:1;transform:none}

    /* Accessibility: skip link */
    .skip-link {
      position: absolute;
      left: -999px;
      top: auto;
      width: 1px;
      height: 1px;
      overflow: hidden;
      z-index: 3000;
      background: var(--primary);
      color: #fff;
      padding: .75rem 1.5rem;
      border-radius: var(--radius);
      font-weight: 600;
      transition: left .2s;
    }
    .skip-link:focus {
      left: 16px;
      top: 16px;
      width: auto;
      height: auto;
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
    /* Focus outlines for accessibility */
    a:focus, button:focus, input:focus, textarea:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
  </style>
</head>
<body>
  <span id="progress" role="presentation"></span>
  <a href="#home" class="skip-link">Skip to content</a>
  <header id="header" role="banner">
    <div class="container">
      <nav aria-label="Main navigation" role="navigation">
        <div class="logo" tabindex="0">Allied Construction</div>
        <ul id="menu">
          <li><a href="#about">About</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#process">Process</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#awards">Awards</a></li>
          <li><a href="#testimonials">Testimonials</a></li>
          <li><a href="#faq">FAQ</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        <div style="display:flex;align-items:center;">
          <button id="themeToggle" aria-label="Toggle light/dark mode"><i class="fa-solid fa-sun"></i></button>
          <button class="hamburger" id="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="menu"><i class="fa-solid fa-bars"></i></button>
        </div>
      </nav>
    </div>
  </header>

  <main id="home" tabindex="-1">
    <!-- Hero -->
    <section class="hero" data-animate>
      <div class="hero-overlay"></div>
      <div class="container" style="position:relative;z-index:1;">
        <h1>Building Your Vision.<br>Engineering Your Future.</h1>
        <p>From concept to completion, we deliver award-winning commercial and residential construction solutions across Chicagoland.</p>
        <a href="#contact" class="btn">Request a Quote</a>
        <div class="stats">
          <div class="stat"><strong id="years">30+</strong>Years Experience</div>
          <div class="stat"><strong id="projects">150</strong>Projects Delivered</div>
          <div class="stat"><strong id="safety">0</strong>Safety Violations</div>
        </div>
      </div>
    </section>

    <span class="wave"><svg viewBox="0 0 1440 80"><path d="M0,32L80,48C160,64,320,96,480,106.7C640,117,800,107,960,74.7C1120,43,1280,21,1360,10.7L1440,0V80H0Z"></path></svg></span>

    <!-- About -->
    <section id="about" data-animate>
      <div class="container">
        <h2>About Us</h2>
        <p>Established in 1995, Allied Construction has earned a reputation for precision craftsmanship, transparent project management, and relentless safety standards. Our union-trained teams hold <strong>LEED</strong>, <strong>OSHA 30</strong>, and <strong>BPI</strong> certifications, turning blueprints into benchmarks.</p>
      </div>
    </section>

    <!-- Services -->
    <section id="services" data-animate>
      <div class="container">
        <h2>Our Services</h2>
        <div class="cards">
          <div class="card"><i class="fa-solid fa-city"></i><h3>Commercial Build-Outs</h3><p>Turnkey solutions for offices, retail, and industrial spaces—from permits to punch-list.</p></div>
          <div class="card"><i class="fa-solid fa-house"></i><h3>Residential Remodeling</h3><p>High-end kitchens, bathrooms, and whole-home renovations that add lasting value.</p></div>
          <div class="card"><i class="fa-solid fa-screwdriver-wrench"></i><h3>HVAC & Mechanical</h3><p>Energy-efficient systems designed, fabricated, and installed by certified experts.</p></div>
          <div class="card"><i class="fa-solid fa-solar-panel"></i><h3>Sustainable Retrofits</h3><p>Solar integration, green roofs, and LEED consulting for eco-forward clients.</p></div>
        </div>
      </div>
    </section>

    <span class="wave"><svg viewBox="0 0 1440 80"><path d="M0,64L60,58.7C120,53,240,43,360,37.3C480,32,600,32,720,37.3C840,43,960,53,1080,69.3C1200,85,1320,107,1380,117.3L1440,128V0H0Z"></path></svg></span>

    <!-- Process -->
    <section id="process" class="process" data-animate>
      <div class="container">
        <h2>Our 4‑Step Process</h2>
        <div class="steps">
          <div class="step"><i class="fa-solid fa-lightbulb"></i><h3>Concept</h3><p>We listen to your vision and develop a clear project roadmap.</p></div>
          <div class="step"><i class="fa-solid fa-pencil-ruler"></i><h3>Design</h3><p>Our architects craft functional, aesthetic blueprints with value‑engineering.</p></div>
          <div class="step"><i class="fa-solid fa-hard-hat"></i><h3>Build</h3><p>Certified crews transform plans into reality with rigorous quality control.</p></div>
          <div class="step"><i class="fa-solid fa-handshake"></i><h3>Handover</h3><p>You receive keys, warranties, and a post‑occupancy sustainability report.</p></div>
        </div>
      </div>
    </section>

    <!-- Projects -->
    <section id="projects" data-animate>
      <div class="container">
        <h2>Featured Projects</h2>
        <div class="gallery">
          <img src="https://source.unsplash.com/random/600x400?industrial-construction" alt="Industrial build" loading="lazy" decoding="async" />
          <img src="https://source.unsplash.com/random/600x400?modern-office" alt="Office build" loading="lazy" decoding="async" />
          <img src="https://source.unsplash.com/random/600x400?residential-renovation" alt="Residential renovation" loading="lazy" decoding="async" />
          <img src="https://source.unsplash.com/random/600x400?solar-panel-roof" alt="Sustainable retrofit" loading="lazy" decoding="async" />
        </div>
      </div>
    </section>

    <!-- Awards -->
    <section id="awards" data-animate>
      <div class="container">
        <h2>Awards & Certifications</h2>
        <div class="awards">
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=LEED+Gold" alt="LEED Gold" />
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=ABC+Excellence" alt="ABC Excellence in Construction" />
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=Safety+Star" alt="Safety Star" />
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=Energy+Star" alt="Energy Star Partner" />
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section id="testimonials" class="testimonials" data-animate>
      <div class="container">
        <h2>What Our Clients Say</h2>
        <div class="carousel">
          <div class="card"><blockquote>Allied transformed our outdated warehouse into a cutting-edge HQ—on schedule and under budget.</blockquote><strong>— J. Martinez, CEO, TechEdge</strong></div>
          <div class="card"><blockquote>Professional, transparent, and meticulous. We couldn't be happier with our new home addition.</blockquote><strong>— S. Patel, Homeowner</strong></div>
          <div class="card"><blockquote>The team handled everything—permits, inspections, and a flawless LEED certification.</blockquote><strong>— L. Chen, Facility Manager, GreenWorks</strong></div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="faq container" data-animate>
      <h2>Frequently Asked Questions</h2>
      <details><summary>Are you licensed, bonded, and insured?</summary><p>Absolutely. We hold all required state & city licenses, carry multi-million-dollar liability coverage, and are fully bonded.</p></details>
      <details><summary>Do you offer free estimates?</summary><p>Yes, schedule a site visit and we'll provide a detailed, no-obligation quote.</p></details>
      <details><summary>How do you handle change orders?</summary><p>Changes are documented with transparent pricing and only proceed upon written client approval.</p></details>
    </section>

    <!-- Contact -->
    <section id="contact" data-animate>
      <div class="container">
        <div class="call">
          <h2>Ready to break ground?</h2>
          <p>Request a free consultation and project estimate.</p>
          <form id="contactForm" style="max-width:600px;margin:auto;margin-top:1.5rem;display:grid;gap:1rem;">
            <input name="name" type="text" placeholder="Your Name" required style="padding:.75rem;border:none;border-radius:var(--radius);">
            <input name="email" type="email" placeholder="Email" required style="padding:.75rem;border:none;border-radius:var(--radius);">
            <input name="phone" type="tel" placeholder="Phone (optional)" style="padding:.75rem;border:none;border-radius:var(--radius);">
            <textarea name="message" rows="4" placeholder="Project details…" required style="padding:.75rem;border:none;border-radius:var(--radius);"></textarea>
            <button type="submit" class="btn" style="cursor:pointer;">Send Message</button>
            <p id="formStatus" aria-live="polite" style="font-weight:600;margin-top:.5rem;"></p>
          </form>
        </div>
      </div>
    </section>
  </main>

  <!-- Sticky Mobile CTA -->
  <div id="stickyCTA" role="complementary"><span>Need a quote?</span><a href="#contact">Get in touch</a></div>

  <footer role="contentinfo">
    © <span id="year"></span> Allied Construction • <a href="tel:+13125551234">312-555-1234</a> • Chicago, IL
  </footer>

  <button id="topBtn" aria-label="Back to top"><i class="fa-solid fa-arrow-up"></i></button>

  <script>
    // ===== Header scroll shadow & progress =====
    const header = document.getElementById('header');
    const progress = document.getElementById('progress');
    window.addEventListener('scroll', () => {
      const scY = window.scrollY;
      header.classList.toggle('scrolled', scY > 80);
      const max = document.body.scrollHeight - innerHeight;
      progress.style.width = `${(scY / max) * 100}%`;
    });

    // ===== Mobile Nav =====
    const hamburger = document.getElementById('hamburger');
    const menu = document.getElementById('menu');
    hamburger.addEventListener('click', () => {
      const expanded = menu.classList.toggle('open');
      hamburger.setAttribute('aria-expanded', expanded);
      // Accessibility: focus first menu item when opened
      if (expanded) {
        const firstLink = menu.querySelector('a');
        if (firstLink) firstLink.focus();
      }
    });

    // ===== Theme Toggle =====
    const toggleBtn = document.getElementById('themeToggle');
    const root = document.documentElement;
    function setTheme(mode) {
      root.classList.toggle('dark', mode === 'dark');
      localStorage.setItem('theme', mode);
      toggleBtn.innerHTML = mode === 'dark'
        ? '<i class="fa-solid fa-moon"></i>'
        : '<i class="fa-solid fa-sun"></i>';
    }
    const saved = localStorage.getItem('theme');
    if (saved) setTheme(saved);
    toggleBtn.addEventListener('click', () =>
      setTheme(root.classList.contains('dark') ? 'light' : 'dark')
    );

    // ===== Active link & back-to-top =====
    const links = document.querySelectorAll('nav a');
    const topBtn = document.getElementById('topBtn');
    window.addEventListener('scroll', () => {
      const fromTop = scrollY + 90;
      links.forEach(l => {
        const section = document.querySelector(l.getAttribute('href'));
        if (section && section.offsetTop <= fromTop && section.offsetTop + section.offsetHeight > fromTop) {
          l.classList.add('active');
        } else {
          l.classList.remove('active');
        }
      });
      topBtn.classList.toggle('show', scrollY > 700);
    });
    topBtn.addEventListener('click', () => scrollTo({ top: 0, behavior: 'smooth' }));

    // ===== Reveal on scroll =====
    if ('IntersectionObserver' in window) {
      const io = new IntersectionObserver(es => {
        es.forEach(e => e.isIntersecting && e.target.classList.add('show'));
      }, { threshold: .15 });
      document.querySelectorAll('[data-animate]').forEach(el => io.observe(el));
    } else {
      document.querySelectorAll('[data-animate]').forEach(el => el.classList.add('show'));
    }

    // ===== Counters =====
    const counters = [
      { el: '#years', target: 30 },
      { el: '#projects', target: 150 },
      { el: '#safety', target: 0 }
    ];
    counters.forEach(c => {
      const el = document.querySelector(c.el);
      let start = 0;
      const step = Math.max(1, c.target / 60);
      const i = setInterval(() => {
        start += step;
        el.textContent = Math.ceil(start);
        if (start >= c.target) clearInterval(i);
      }, 30);
    });

    // ===== Lightbox =====
    document.querySelectorAll('.gallery img').forEach(img =>
      img.addEventListener('click', () => {
        const overlay = document.createElement('div');
        overlay.id = 'lightbox';
        overlay.innerHTML = `<img src="${img.src.replace('600x400','1200x800')}" alt="${img.alt}"><span id='close'>&times;</span>`;
        document.body.appendChild(overlay);
        overlay.addEventListener('click', e => {
          if (e.target.id === 'lightbox' || e.target.id === 'close') overlay.remove();
        });
      })
    );

    // ===== Formspree Submission =====
    const form = document.getElementById('contactForm');
    form.addEventListener('submit', async e => {
      e.preventDefault();
      const status = document.getElementById('formStatus');
      status.textContent = 'Sending…';
      const data = new FormData(form);
      try {
        const res = await fetch('https://formspree.io/f/your-id', {
          method: 'POST',
          body: data,
          headers: { Accept: 'application/json' }
        });
        if (res.ok) {
          status.textContent = 'Thank you! We will be in touch.';
          form.reset();
        } else {
          status.textContent = 'Oops! Something went wrong.';
        }
      } catch {
        status.textContent = 'Network error – please retry.';
      }
    });

    // ===== Current Year =====
    document.getElementById('year').textContent = new Date().getFullYear();

    // ===== Service Worker (offline cache) =====
    if ('serviceWorker' in navigator) {
      const code = `
        self.addEventListener('install',e=>{
          e.waitUntil(caches.open('allied-v1').then(c=>c.addAll(['/'])));
        });
        self.addEventListener('fetch',e=>{
          e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request)));
        });
      `;
      const blob = new Blob([code], { type: 'text/javascript' });
      navigator.serviceWorker.register(URL.createObjectURL(blob));
    }
  </script>
</body>
</html>
