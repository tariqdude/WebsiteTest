<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Allied Construction | Chicago Design-Build Firm</title>
  <!-- SEO & Social -->
  <meta name="description" content="Allied Construction is Chicago’s award‑winning design‑build firm for commercial, industrial & high‑end residential projects. Quality, safety, and sustainability—built into every square foot." />
  <meta name="keywords" content="construction, design-build, Chicago, commercial, residential, LEED, sustainable, remodeling, industrial, contractor, builder, architecture, engineering" />
  <meta property="og:title" content="Allied Construction | Building Your Vision" />
  <meta property="og:description" content="From skyscrapers to smart homes, we engineer the future of Chicagoland construction." />
  <meta property="og:image" content="https://source.unsplash.com/featured/1200x630?construction,Chicago" />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://alliedconstruction.github.io/" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@alliedconstruction" />
  <meta name="twitter:title" content="Allied Construction | Building Your Vision" />
  <meta name="twitter:description" content="From skyscrapers to smart homes, we engineer the future of Chicagoland construction." />
  <meta name="twitter:image" content="https://source.unsplash.com/featured/1200x630?construction,Chicago" />
  <meta name="theme-color" content="#0A66C2" />
  <link rel="canonical" href="https://alliedconstruction.github.io/" />
  <!-- Apple PWA -->
  <link rel="apple-touch-icon" href="/icon.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <!-- CSP for security -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://fonts.googleapis.com https://fonts.gstatic.com https://cdnjs.cloudflare.com https://source.unsplash.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com; script-src 'self' 'unsafe-inline'; img-src * data:; connect-src https://formspree.io https://source.unsplash.com; font-src https://fonts.gstatic.com https://cdnjs.cloudflare.com;"/>
  <!-- Structured Data -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Allied Construction",
      "url": "https://alliedconstruction.github.io/",
      "logo": "/icon.png",
      "sameAs": [
        "https://twitter.com/alliedconstruction",
        "https://www.linkedin.com/company/alliedconstruction"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+1-312-555-1234",
        "contactType": "customer service",
        "areaServed": "US-IL"
      },
      "address": {
        "@type": "PostalAddress",
        "addressLocality": "Chicago",
        "addressRegion": "IL",
        "addressCountry": "USA"
      }
    }
  </script>
  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <!-- PWA Manifest (data URI) -->
  <link rel="manifest" href="data:application/manifest+json;base64,ew0KICAibmFtZSI6ICJBbGxpZWQgQ29uc3RydWN0aW9uIiwNCiAgInNob3J0X25hbWUiOiAiQWxsaWVkIiwNCiAgImljb24iOiAiL2ljb24ucG5nIiwNCiAgImJhY2tncm91bmRfY29sb3IiOiAiI2ZmZiIsDQogICJ0aGVtZV9jb2xvciI6ICIjMEE2NkMyIiwNCiAgInN0YXJ0X3VybCI6ICIuLyINCn0=">
  <style>
    /* ===== CSS Variables ===== */
    :root {
      --primary:#0A66C2; --primary-dark:#094b91; --accent:#F59E0B;
      --bg:#fafafa; --surface:#ffffff; --text:#111827; --gray:#f3f4f6;
      --radius:12px; --shadow:0 8px 22px rgba(0,0,0,.06);
      --font:'Poppins',sans-serif; --transition:.3s cubic-bezier(.4,0,.2,1);
      --scroll-height:4px;
    }
    @media(prefers-color-scheme:dark){:root:not(.light){--bg:#0f1116;--surface:#1a1d24;--text:#f1f3f9;--gray:#23262e;--shadow:0 8px 22px rgba(0,0,0,.45);}}
    :root.dark{--bg:#0f1116;--surface:#1a1d24;--text:#f1f3f9;--gray:#23262e;--shadow:0 8px 22px rgba(0,0,0,.45);}

    /* ===== Base Reset ===== */
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{font-family:var(--font);background:var(--bg);color:var(--text);line-height:1.6}
    img{display:block;max-width:100%}
    h2{font-size:clamp(1.8rem,2.5vw,2.4rem);margin-bottom:1rem;text-align:center;color:var(--primary-dark)}

    /* ===== Utilities ===== */
    .container{max-width:1200px;margin:auto;padding:1rem 1.5rem}
    .btn{display:inline-block;background:var(--primary);color:#fff;padding:.9rem 1.8rem;border-radius:var(--radius);font-weight:600;text-decoration:none;transition:background var(--transition)}
    .btn:hover{background:var(--primary-dark)}

    /* ===== Scroll Progress ===== */
    #progress{position:fixed;left:0;top:0;height:var(--scroll-height);background:var(--accent);width:0%;z-index:2000}

    /* ===== Header ===== */
    header{position:fixed;top:0;left:0;right:0;background:transparent;padding:.25rem 0;transition:background .25s ease,box-shadow .25s ease}
    header.scrolled{background:var(--surface);box-shadow:var(--shadow)}
    nav{display:flex;align-items:center;justify-content:space-between;min-height:64px}
    .logo{font-weight:800;font-size:1.35rem;color:var(--primary);letter-spacing:-.5px}
    nav ul{display:flex;list-style:none;gap:1.4rem}
    nav a{font-weight:600;text-decoration:none;color:var(--text);transition:color var(--transition)}
    nav a:hover,nav a.active{color:var(--primary)}
    .hamburger{display:none;font-size:1.6rem;cursor:pointer;background:none;border:none;color:var(--primary)}
    #themeToggle{margin-left:.75rem;background:none;border:none;font-size:1.5rem;color:var(--accent);cursor:pointer;transition:transform var(--transition)}
    #themeToggle:hover{transform:rotate(15deg)}
    @media(max-width:768px){nav ul{position:absolute;top:64px;left:0;width:100%;flex-direction:column;background:var(--surface);max-height:0;overflow:hidden;transition:max-height .35s ease;border-top:1px solid var(--gray)}nav ul.open{max-height:370px} .hamburger{display:block}}

    /* ===== Hero ===== */
    .hero{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:3rem;align-items:center;min-height:100vh;background:url('https://source.unsplash.com/1600x900?chicago-skyline') center/cover fixed;padding-top:6rem;background-attachment:fixed;background-position:center;background-repeat:no-repeat;background-size:cover;position:relative;overflow:hidden}
    @media (max-width: 900px) {
      .hero { background-attachment: scroll; }
    }
    .hero-overlay{background:rgba(0,0,0,.55);position:absolute;inset:0}
    .hero>*{position:relative;color:#fff}
    .hero h1{font-size:clamp(2.8rem,5vw,4.2rem);line-height:1.15;margin-bottom:1rem}
    .hero p{font-size:1.1rem;max-width:600px;margin-bottom:1.5rem}
    .stats{display:flex;flex-wrap:wrap;justify-content:center;gap:2.5rem;margin-top:2.5rem}
    .stat{text-align:center;min-width:120px}
    .stat strong{display:block;font-size:2.4rem;color:var(--accent)}

    /* ===== Wave ===== */
    .wave{display:block;width:100%;height:80px;line-height:0}
    .wave svg{width:100%;height:100%;fill:var(--surface)}

    /* ===== Services Cards ===== */
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.8rem;margin-top:2rem}
    .card{background:var(--surface);padding:2.2rem 1.8rem;border-radius:var(--radius);box-shadow:var(--shadow);text-align:center;transition:transform var(--transition),box-shadow var(--transition)}
    .card:hover{transform:translateY(-7px) scale(1.02);box-shadow:0 18px 36px rgba(0,0,0,.08)}
    .card i{font-size:2rem;color:var(--primary);margin-bottom:.75rem}

    /* ===== Awards ===== */
    .awards{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem;align-items:center;justify-items:center;margin-top:2rem;filter:grayscale(1);opacity:.8}
    .awards img{max-height:60px}

    /* ===== Process ===== */
    .process{background:var(--gray)}
    .steps{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.8rem;margin-top:2rem;counter-reset:step}
    .step{background:var(--surface);padding:2rem 1.6rem;border-radius:var(--radius);box-shadow:var(--shadow);position:relative}
    .step::before{counter-increment:step;content:counter(step);position:absolute;top:-18px;left:-18px;width:40px;height:40px;border-radius:50%;background:var(--primary);color:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:var(--shadow)}
    .step h3{margin-bottom:.5rem}

    /* ===== Gallery ===== */
    .gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;margin-top:2rem}
    .gallery img{border-radius:var(--radius);object-fit:cover;aspect-ratio:4/3;cursor:zoom-in;transition:transform var(--transition)}
    .gallery img:hover{transform:scale(1.05)}

    /* ===== Lightbox ===== */
    #lightbox{position:fixed;inset:0;background:rgba(0,0,0,.85);display:flex;align-items:center;justify-content:center;z-index:2000;animation:fadeIn .3s ease-out}
    #lightbox img{max-width:92%;max-height:92%;border-radius:var(--radius);box-shadow:var(--shadow);cursor:zoom-out}
    #close{position:absolute;top:1.4rem;right:2rem;font-size:2rem;color:#fff;cursor:pointer}
    @keyframes fadeIn{from{opacity:0}to{opacity:1}}

    /* ===== Testimonials ===== */
    .testimonials{background:var(--gray)}
    .carousel{display:flex;gap:1.5rem;overflow-x:auto;scroll-snap-type:x mandatory;padding-bottom:.5rem;-webkit-overflow-scrolling:touch}
    .carousel::-webkit-scrollbar{display:none}
    .carousel .card{min-width:280px;scroll-snap-align:start}
    blockquote{font-style:italic;margin-bottom:1rem;position:relative;padding-left:1.5rem}
    blockquote::before{content:"\f10d";font-family:"Font Awesome 6 Free";font-weight:900;position:absolute;left:0;top:0;color:var(--primary)}

    /* ===== FAQ & Contact same as before... (kept) */
    .faq details{background:var(--surface);margin-bottom:1rem;padding:1rem 1.25rem;border-radius:var(--radius);box-shadow:var(--shadow)}
    .faq summary{cursor:pointer;font-weight:600;list-style:none;position:relative;padding-right:1.5rem}
    .faq summary::after{content:"\f078";font-family:"Font Awesome 6 Free";font-weight:900;position:absolute;right:0;transition:transform var(--transition)}
    .faq details[open] summary::after{transform:rotate(180deg)}

    .call{position:relative;overflow:hidden;background:linear-gradient(135deg,var(--primary)0%,var(--primary-dark)100%);color:#fff;text-align:center;border-radius:var(--radius);padding:3rem 1rem;margin-top:2rem}
    .call::before{content:"";position:absolute;inset:0;background:hsla(0,0%,100%,.05);transform:skewY(-6deg)}
    .call h2{font-size:clamp(1.8rem,3vw,2.4rem);margin-bottom:1rem}

    /* ===== Sticky Mobile CTA ===== */
    #stickyCTA{position:fixed;bottom:0;left:0;right:0;background:var(--primary);color:#fff;display:none;align-items:center;justify-content:space-between;padding:.75rem 1rem;z-index:1500}
    #stickyCTA a{color:#fff;font-weight:600}
    @media(max-width:640px){#stickyCTA{display:flex}}

    /* ===== Back-to-top ===== */
    #topBtn{position:fixed;bottom:24px;right:24px;background:var(--primary);color:#fff;border:none;border-radius:50%;width:48px;height:48px;font-size:1.25rem;display:none;align-items:center;justify-content:center;cursor:pointer;box-shadow:var(--shadow);transition:background var(--transition)}
    #topBtn:hover{background:var(--primary-dark)}
    #topBtn.show{display:flex}

    /* ===== Reveal ===== */
    [data-animate]{opacity:0;transform:translateY(40px);transition:opacity .6s ease,transform .6s ease}
    [data-animate].show{opacity:1;transform:none}

    /* Accessibility: skip link */
    .skip-link {
      position: absolute;
      left: -999px;
      top: auto;
      width: 1px;
      height: 1px;
      overflow: hidden;
      z-index: 3000;
      background: var(--primary);
      color: #fff;
      padding: .75rem 1.5rem;
      border-radius: var(--radius);
      font-weight: 600;
      transition: left .2s;
    }
    .skip-link:focus {
      left: 16px;
      top: 16px;
      width: auto;
      height: auto;
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }
    /* Focus outlines for accessibility */
    a:focus, button:focus, input:focus, textarea:focus {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    /* Visually hidden utility for accessibility */
    .visually-hidden {
      position: absolute !important;
      height: 1px; width: 1px;
      overflow: hidden;
      clip: rect(1px, 1px, 1px, 1px);
      white-space: nowrap;
    }

    /* Remove inline form styles and move here for consistency */
    #contactForm input, #contactForm textarea {
      padding: .75rem;
      border: none;
      border-radius: var(--radius);
    }
    #contactForm {
      max-width: 600px;
      margin: auto;
      margin-top: 1.5rem;
      display: grid;
      gap: 1rem;
    }

    /* Loader overlay */
    #pageloader {
      position: fixed; inset: 0; background: var(--surface); z-index: 3000;
      display: flex; align-items: center; justify-content: center;
      transition: opacity .4s;
    }
    #pageloader.hide { opacity: 0; pointer-events: none; }
    #pageloader .spinner {
      border: 4px solid var(--gray); border-top: 4px solid var(--primary);
      border-radius: 50%; width: 48px; height: 48px; animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Gallery keyboard focus */
    .gallery img:focus { outline: 2px solid var(--accent); outline-offset: 2px; }

    /* Carousel auto-scroll indicator */
    .carousel-indicators {
      display: flex; justify-content: center; gap: .5rem; margin-top: .5rem;
    }
    .carousel-indicators button {
      width: 10px; height: 10px; border-radius: 50%; border: none;
      background: var(--gray); cursor: pointer; transition: background .2s;
    }
    .carousel-indicators button.active { background: var(--primary); }

    /* FAQ accordion arrow animation */
    .faq summary::after { transition: transform var(--transition); }

    /* Contact form honeypot */
    .honeypot { display: none; }

    /* Parallax hero effect */
    .hero {
      background-attachment: fixed;
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      position: relative;
      overflow: hidden;
    }
    @media (max-width: 900px) {
      .hero { background-attachment: scroll; }
    }
    /* Cookie consent banner */
    #cookieConsent {
      position: fixed;
      bottom: 0; left: 0; right: 0;
      background: var(--surface);
      color: var(--text);
      box-shadow: 0 -2px 16px rgba(0,0,0,.08);
      padding: 1rem 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 1.5rem;
      z-index: 4000;
      font-size: 1rem;
      transition: transform .4s;
    }
    #cookieConsent.hide { transform: translateY(100%); }
    #cookieConsent button {
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: var(--radius);
      padding: .5rem 1.2rem;
      font-weight: 600;
      cursor: pointer;
      transition: background var(--transition);
    }
    #cookieConsent button:hover { background: var(--primary-dark); }
    /* Blog/news section */
    .blog { background: var(--gray); padding: 2rem 0; }
    .blog-list { display: grid; grid-template-columns: repeat(auto-fit,minmax(320px,1fr)); gap: 2rem; margin-top: 2rem; }
    .blog-card { background: var(--surface); border-radius: var(--radius); box-shadow: var(--shadow); padding: 1.5rem; }
    .blog-card h3 { margin-bottom: .5rem; }
    .blog-card time { color: var(--primary); font-size: .95rem; }
    /* Google Maps embed */
    .map-embed { border-radius: var(--radius); overflow: hidden; margin-top: 2rem; box-shadow: var(--shadow); }
    /* Error tooltip for form validation */
    .error-tooltip {
      color: #fff;
      background: #c00;
      border-radius: 6px;
      padding: .3em .7em;
      font-size: .95em;
      position: absolute;
      z-index: 10;
      left: 105%;
      top: 50%;
      transform: translateY(-50%);
      white-space: nowrap;
      box-shadow: 0 2px 8px rgba(0,0,0,.12);
      display: none;
    }
    .form-group { position: relative; }
    .form-group.error input,
    .form-group.error textarea { border: 2px solid #c00; }
    .form-group.error .error-tooltip { display: block; }
    /* Social feed placeholder */
    .social-feed { margin: 2rem 0; text-align: center; }
    .social-feed .feed-placeholder {
      background: var(--gray);
      border-radius: var(--radius);
      padding: 2rem;
      color: var(--primary-dark);
      font-weight: 600;
      font-size: 1.1rem;
      margin: 0 auto;
      max-width: 400px;
    }
    /* Chat widget placeholder */
    #chatWidget {
      position: fixed;
      bottom: 90px;
      right: 24px;
      z-index: 3000;
      background: var(--surface);
      border-radius: 18px 18px 0 18px;
      box-shadow: 0 4px 24px rgba(0,0,0,.12);
      padding: 1rem 1.2rem;
      min-width: 220px;
      display: flex;
      align-items: center;
      gap: .7rem;
      font-size: 1rem;
      color: var(--primary-dark);
      cursor: pointer;
      transition: box-shadow .2s;
    }
    #chatWidget:hover { box-shadow: 0 8px 32px rgba(0,0,0,.18); }
  </style>
</head>
<body>
  <!-- Loader overlay -->
  <div id="pageloader" aria-label="Loading page" role="status"><span class="spinner"></span></div>
  <span id="progress" role="presentation"></span>
  <a href="#home" class="skip-link">Skip to content</a>
  <!-- Cookie Consent Banner -->
  <div id="cookieConsent" class="hide" role="alert" aria-live="polite">
    <span>We use cookies to improve your experience. By using our site, you agree to our <a href="#" style="color:var(--primary);text-decoration:underline;">privacy policy</a>.</span>
    <button id="acceptCookies">Accept</button>
  </div>
  <header id="header" role="banner">
    <div class="container">
      <nav aria-label="Main navigation" role="navigation">
        <div class="logo" tabindex="0">Allied Construction</div>
        <ul id="menu">
          <li><a href="#about">About</a></li>
          <li><a href="#services">Services</a></li>
          <li><a href="#process">Process</a></li>
          <li><a href="#projects">Projects</a></li>
          <li><a href="#awards">Awards</a></li>
          <li><a href="#testimonials">Testimonials</a></li>
          <li><a href="#faq">FAQ</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        <div style="display:flex;align-items:center;">
          <button id="themeToggle" aria-label="Toggle light/dark mode"><i class="fa-solid fa-sun"></i></button>
          <button class="hamburger" id="hamburger" aria-label="Toggle menu" aria-expanded="false" aria-controls="menu"><i class="fa-solid fa-bars"></i></button>
        </div>
      </nav>
    </div>
  </header>
  <main id="home" tabindex="-1">
    <!-- Hero -->
    <section class="hero" data-animate aria-label="Hero section">
      <div class="hero-overlay" aria-hidden="true"></div>
      <div class="container" style="position:relative;z-index:1;">
        <h1><span aria-live="polite">Building Your Vision.<br>Engineering Your Future.</span></h1>
        <p>From concept to completion, we deliver award-winning commercial and residential construction solutions across Chicagoland.</p>
        <a href="#contact" class="btn" aria-label="Request a quote, go to contact section">Request a Quote</a>
        <div class="stats" aria-label="Company statistics">
          <div class="stat"><strong id="years" aria-live="polite">30+</strong>Years Experience</div>
          <div class="stat"><strong id="projects" aria-live="polite">150</strong>Projects Delivered</div>
          <div class="stat"><strong id="safety" aria-live="polite">0</strong>Safety Violations</div>
        </div>
      </div>
    </section>
    <span class="wave"><svg viewBox="0 0 1440 80"><path d="M0,32L80,48C160,64,320,96,480,106.7C640,117,800,107,960,74.7C1120,43,1280,21,1360,10.7L1440,0V80H0Z"></path></svg></span>
    <!-- About -->
    <section id="about" data-animate>
      <div class="container">
        <h2>About Us</h2>
        <p>Established in 1995, Allied Construction has earned a reputation for precision craftsmanship, transparent project management, and relentless safety standards. Our union-trained teams hold <strong>LEED</strong>, <strong>OSHA 30</strong>, and <strong>BPI</strong> certifications, turning blueprints into benchmarks.</p>
      </div>
    </section>
    <!-- Services -->
    <section id="services" data-animate>
      <div class="container">
        <h2>Our Services</h2>
        <div class="cards">
          <div class="card"><i class="fa-solid fa-city"></i><h3>Commercial Build-Outs</h3><p>Turnkey solutions for offices, retail, and industrial spaces—from permits to punch-list.</p></div>
          <div class="card"><i class="fa-solid fa-house"></i><h3>Residential Remodeling</h3><p>High-end kitchens, bathrooms, and whole-home renovations that add lasting value.</p></div>
          <div class="card"><i class="fa-solid fa-screwdriver-wrench"></i><h3>HVAC & Mechanical</h3><p>Energy-efficient systems designed, fabricated, and installed by certified experts.</p></div>
          <div class="card"><i class="fa-solid fa-solar-panel"></i><h3>Sustainable Retrofits</h3><p>Solar integration, green roofs, and LEED consulting for eco-forward clients.</p></div>
        </div>
      </div>
    </section>
    <span class="wave"><svg viewBox="0 0 1440 80"><path d="M0,64L60,58.7C120,53,240,43,360,37.3C480,32,600,32,720,37.3C840,43,960,53,1080,69.3C1200,85,1320,107,1380,117.3L1440,128V0H0Z"></path></svg></span>
    <!-- Process -->
    <section id="process" class="process" data-animate>
      <div class="container">
        <h2>Our 4‑Step Process</h2>
        <div class="steps">
          <div class="step"><i class="fa-solid fa-lightbulb"></i><h3>Concept</h3><p>We listen to your vision and develop a clear project roadmap.</p></div>
          <div class="step"><i class="fa-solid fa-pencil-ruler"></i><h3>Design</h3><p>Our architects craft functional, aesthetic blueprints with value‑engineering.</p></div>
          <div class="step"><i class="fa-solid fa-hard-hat"></i><h3>Build</h3><p>Certified crews transform plans into reality with rigorous quality control.</p></div>
          <div class="step"><i class="fa-solid fa-handshake"></i><h3>Handover</h3><p>You receive keys, warranties, and a post‑occupancy sustainability report.</p></div>
        </div>
      </div>
    </section>
    <!-- Projects -->
    <section id="projects" data-animate aria-label="Featured Projects">
      <div class="container">
        <h2>Featured Projects</h2>
        <div class="gallery" role="list">
          <img src="https://source.unsplash.com/random/600x400?industrial-construction" alt="Industrial build project in Chicago, steel structure with cranes" loading="lazy" decoding="async" tabindex="0" role="listitem" />
          <img src="https://source.unsplash.com/random/600x400?modern-office" alt="Modern office construction project, glass facade" loading="lazy" decoding="async" tabindex="0" role="listitem" />
          <img src="https://source.unsplash.com/random/600x400?residential-renovation" alt="Residential renovation project, kitchen interior" loading="lazy" decoding="async" tabindex="0" role="listitem" />
          <img src="https://source.unsplash.com/random/600x400?solar-panel-roof" alt="Sustainable retrofit with solar panels on roof" loading="lazy" decoding="async" tabindex="0" role="listitem" />
        </div>
      </div>
    </section>
    <!-- Awards -->
    <section id="awards" data-animate>
      <div class="container">
        <h2>Awards & Certifications</h2>
        <div class="awards">
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=LEED+Gold" alt="LEED Gold" />
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=ABC+Excellence" alt="ABC Excellence in Construction" />
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=Safety+Star" alt="Safety Star" />
          <img src="https://dummyimage.com/120x60/eeeeee/000&text=Energy+Star" alt="Energy Star Partner" />
        </div>
      </div>
    </section>
    <!-- Testimonials -->
    <section id="testimonials" class="testimonials" data-animate aria-label="Client Testimonials">
      <div class="container">
        <h2>What Our Clients Say</h2>
        <div class="carousel" tabindex="0" aria-live="polite">
          <div class="card"><blockquote>Allied transformed our outdated warehouse into a cutting-edge HQ—on schedule and under budget.</blockquote><strong>— J. Martinez, CEO, TechEdge</strong></div>
          <div class="card"><blockquote>Professional, transparent, and meticulous. We couldn't be happier with our new home addition.</blockquote><strong>— S. Patel, Homeowner</strong></div>
          <div class="card"><blockquote>The team handled everything—permits, inspections, and a flawless LEED certification.</blockquote><strong>— L. Chen, Facility Manager, GreenWorks</strong></div>
        </div>
        <div class="carousel-indicators" aria-label="Testimonial navigation">
          <button data-slide="0" aria-label="Show testimonial 1"></button>
          <button data-slide="1" aria-label="Show testimonial 2"></button>
          <button data-slide="2" aria-label="Show testimonial 3"></button>
        </div>
      </div>
    </section>
    <!-- FAQ -->
    <section id="faq" class="faq container" data-animate>
      <h2>Frequently Asked Questions</h2>
      <details><summary>Are you licensed, bonded, and insured?</summary><p>Absolutely. We hold all required state & city licenses, carry multi-million-dollar liability coverage, and are fully bonded.</p></details>
      <details><summary>Do you offer free estimates?</summary><p>Yes, schedule a site visit and we'll provide a detailed, no-obligation quote.</p></details>
      <details><summary>How do you handle change orders?</summary><p>Changes are documented with transparent pricing and only proceed upon written client approval.</p></details>
    </section>
    <!-- Blog/News Section -->
    <section class="blog" id="blog" data-animate>
      <div class="container">
        <h2>Latest News</h2>
        <div class="blog-list">
          <div class="blog-card">
            <h3>Allied Wins 2024 Green Building Award</h3>
            <time datetime="2024-05-01">May 1, 2024</time>
            <p>Our sustainable retrofit project in River North has been recognized for innovation in energy efficiency and design.</p>
          </div>
          <div class="blog-card">
            <h3>Now Offering Smart Home Integration</h3>
            <time datetime="2024-04-15">April 15, 2024</time>
            <p>We now provide full smart home automation and IoT solutions for residential clients.</p>
          </div>
        </div>
      </div>
    </section>
    <!-- Social Media Feed Placeholder -->
    <div class="social-feed" data-animate>
      <div class="feed-placeholder">[Instagram feed coming soon]</div>
    </div>
    <!-- Contact -->
    <section id="contact" data-animate>
      <div class="container">
        <div class="call">
          <h2>Ready to break ground?</h2>
          <p>Request a free consultation and project estimate.</p>
          <form id="contactForm" aria-label="Contact form" autocomplete="off" novalidate>
            <div class="honeypot">
              <label for="website">Website</label>
              <input id="website" name="website" type="text" tabindex="-1" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="name" class="visually-hidden">Your Name</label>
              <input id="name" name="name" type="text" placeholder="Your Name" required autocomplete="name">
              <span class="error-tooltip" id="nameError"></span>
            </div>
            <div class="form-group">
              <label for="email" class="visually-hidden">Email</label>
              <input id="email" name="email" type="email" placeholder="Email" required autocomplete="email">
              <span class="error-tooltip" id="emailError"></span>
            </div>
            <div class="form-group">
              <label for="phone" class="visually-hidden">Phone</label>
              <input id="phone" name="phone" type="tel" placeholder="Phone (optional)" autocomplete="tel">
            </div>
            <div class="form-group">
              <label for="message" class="visually-hidden">Project details</label>
              <textarea id="message" name="message" rows="4" placeholder="Project details…" required></textarea>
              <span class="error-tooltip" id="messageError"></span>
            </div>
            <button type="submit" class="btn" style="cursor:pointer;" aria-busy="false"><span id="submitText">Send Message</span></button>
            <p id="formStatus" aria-live="polite" style="font-weight:600;margin-top:.5rem;"></p>
          </form>
          <div class="map-embed" aria-label="Our office location">
            <iframe title="Allied Construction Chicago Map" src="https://www.openstreetmap.org/export/embed.html?bbox=-87.6847%2C41.8369%2C-87.6047%2C41.8969&amp;layer=mapnik&amp;marker=41.8669,-87.6447" style="width:100%;height:260px;border:none;" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
          </div>
          <noscript>
            <p style="color:#fff;background:#c00;padding:1em;border-radius:8px;margin-top:1em;">JavaScript is required to submit this form. Please email us at <a href="mailto:info@alliedconstruction.com" style="color:#fff;text-decoration:underline;">info@alliedconstruction.com</a>.</p>
          </noscript>
        </div>
      </div>
    </section>
  </main>
  <!-- Sticky Mobile CTA -->
  <div id="stickyCTA" role="complementary"><span>Need a quote?</span><a href="#contact">Get in touch</a></div>
  <footer role="contentinfo">
    © <span id="year"></span> Allied Construction • <a href="tel:+13125551234">312-555-1234</a> • Chicago, IL
  </footer>
  <button id="topBtn" aria-label="Back to top"><i class="fa-solid fa-arrow-up"></i></button>
  <!-- Chat Widget Placeholder -->
  <div id="chatWidget" tabindex="0" aria-label="Open chat support">
    <i class="fa-solid fa-comments"></i> Chat with us
  </div>
  <script>
    // ===== Loader overlay =====
    window.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        document.getElementById('pageloader').classList.add('hide');
      }, 400);
    });
    // ===== Cookie Consent =====
    const cookieConsent = document.getElementById('cookieConsent');
    if (!localStorage.getItem('cookieConsent')) {
      cookieConsent.classList.remove('hide');
    }
    document.getElementById('acceptCookies').onclick = () => {
      localStorage.setItem('cookieConsent', '1');
      cookieConsent.classList.add('hide');
    };
    // ===== Header scroll shadow, progress, sticky hide/show =====
    const header = document.getElementById('header');
    const progress = document.getElementById('progress');
    let lastScrollY = 0;
    window.addEventListener('scroll', () => {
      const scY = window.scrollY;
      header.classList.toggle('scrolled', scY > 80);
      const max = document.body.scrollHeight - innerHeight;
      progress.style.width = `${(scY / max) * 100}%`;
      // Sticky hide/show
      if (scY > lastScrollY && scY > 120) {
        header.style.transform = 'translateY(-100%)';
      } else {
        header.style.transform = '';
      }
      lastScrollY = scY;
    });
    // ===== Mobile Nav (close on link click, ESC, focus trap) =====
    const hamburger = document.getElementById('hamburger');
    const menu = document.getElementById('menu');
    hamburger.addEventListener('click', () => {
      const expanded = menu.classList.toggle('open');
      hamburger.setAttribute('aria-expanded', expanded);
      if (expanded) {
        const firstLink = menu.querySelector('a');
        if (firstLink) firstLink.focus();
        // Trap focus inside menu
        const focusable = menu.querySelectorAll('a');
        let idx = 0;
        menu.onkeydown = e => {
          if (e.key === 'Tab') {
            e.preventDefault();
            idx = e.shiftKey ? (idx - 1 + focusable.length) % focusable.length : (idx + 1) % focusable.length;
            focusable[idx].focus();
          }
          if (e.key === 'Escape') {
            menu.classList.remove('open');
            hamburger.setAttribute('aria-expanded', false);
            hamburger.focus();
          }
        };
      } else {
        menu.onkeydown = null;
      }
    });
    // Close menu on link click (mobile)
    menu.querySelectorAll('a').forEach(link => link.addEventListener('click', () => {
      if (menu.classList.contains('open')) {
        menu.classList.remove('open');
        hamburger.setAttribute('aria-expanded', false);
      }
    }));
    // ===== Theme Toggle (with transition) =====
    const toggleBtn = document.getElementById('themeToggle');
    const root = document.documentElement;
    function setTheme(mode) {
      root.classList.toggle('dark', mode === 'dark');
      localStorage.setItem('theme', mode);
      toggleBtn.innerHTML = mode === 'dark'
        ? '<i class="fa-solid fa-moon"></i>'
        : '<i class="fa-solid fa-sun"></i>';
      document.body.style.transition = 'background .4s, color .4s';
    }
    const saved = localStorage.getItem('theme');
    if (saved) setTheme(saved);
    toggleBtn.addEventListener('click', () =>
      setTheme(root.classList.contains('dark') ? 'light' : 'dark')
    );
    // ===== Active link & back-to-top =====
    const links = document.querySelectorAll('nav a');
    const topBtn = document.getElementById('topBtn');
    window.addEventListener('scroll', () => {
      const fromTop = scrollY + 90;
      links.forEach(l => {
        const section = document.querySelector(l.getAttribute('href'));
        if (section && section.offsetTop <= fromTop && section.offsetTop + section.offsetHeight > fromTop) {
          l.classList.add('active');
        } else {
          l.classList.remove('active');
        }
      });
      topBtn.classList.toggle('show', scrollY > 700);
    });
    topBtn.addEventListener('click', () => scrollTo({ top: 0, behavior: 'smooth' }));
    // ===== Reveal on scroll (IntersectionObserver) =====
    if ('IntersectionObserver' in window) {
      const io = new IntersectionObserver(es => {
        es.forEach(e => e.isIntersecting && e.target.classList.add('show'));
      }, { threshold: .15 });
      document.querySelectorAll('[data-animate]').forEach(el => io.observe(el));
    } else {
      document.querySelectorAll('[data-animate]').forEach(el => el.classList.add('show'));
    }
    // ===== Counters (animate on scroll into view) =====
    function animateCounter(el, target, suffix) {
      let start = target === 0 ? 0 : 1;
      const step = target > 0 ? Math.max(1, target / 60) : 1;
      let started = false;
      function run() {
        if (target === 0) {
          el.textContent = '0';
          return;
        }
        const i = setInterval(() => {
          start += step;
          if (start >= target) {
            el.textContent = target + (suffix || '');
            clearInterval(i);
          } else {
            el.textContent = Math.ceil(start) + (suffix || '');
          }
        }, 30);
      }
      function onScroll() {
        if (!started && el.getBoundingClientRect().top < window.innerHeight - 80) {
          started = true;
          run();
          window.removeEventListener('scroll', onScroll);
        }
      }
      window.addEventListener('scroll', onScroll);
      onScroll();
    }
    animateCounter(document.getElementById('years'), 30, '+');
    animateCounter(document.getElementById('projects'), 150, '');
    animateCounter(document.getElementById('safety'), 0, '');
    // ===== Gallery Lightbox (keyboard, swipe) =====
    document.querySelectorAll('.gallery img').forEach((img, idx, arr) => {
      img.addEventListener('click', () => openLightbox(idx));
      img.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') openLightbox(idx);
      });
    });
    function openLightbox(idx) {
      const arr = Array.from(document.querySelectorAll('.gallery img'));
      let current = idx;
      const overlay = document.createElement('div');
      overlay.id = 'lightbox';
      function showImg(i) {
        overlay.innerHTML = `<img src="${arr[i].src.replace('600x400','1200x800')}" alt="${arr[i].alt}"><span id='close'>&times;</span>`;
      }
      showImg(current);
      document.body.appendChild(overlay);
      overlay.focus();
      overlay.tabIndex = 0;
      overlay.addEventListener('click', e => {
        if (e.target.id === 'lightbox' || e.target.id === 'close') overlay.remove();
      });
      overlay.addEventListener('keydown', e => {
        if (e.key === 'Escape') overlay.remove();
        if (e.key === 'ArrowRight') { current = (current + 1) % arr.length; showImg(current);}
        if (e.key === 'ArrowLeft') { current = (current - 1 + arr.length) % arr.length; showImg(current);}
      });
      // Swipe support
      let startX = null;
      overlay.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
      overlay.addEventListener('touchend', e => {
        if (startX !== null) {
          const dx = e.changedTouches[0].clientX - startX;
          if (dx > 50) { current = (current - 1 + arr.length) % arr.length; showImg(current);}
          if (dx < -50) { current = (current + 1) % arr.length; showImg(current);}
          startX = null;
        }
      });
    }
    // ===== Testimonials Carousel (auto-scroll, keyboard, indicators, touch/swipe) =====
    const carousel = document.querySelector('.carousel');
    const cards = carousel.querySelectorAll('.card');
    const indicators = document.querySelectorAll('.carousel-indicators button');
    let carouselIdx = 0, carouselTimer = null;
    function showCarousel(idx) {
      carousel.scrollTo({ left: cards[idx].offsetLeft, behavior: 'smooth' });
      indicators.forEach((b, i) => b.classList.toggle('active', i === idx));
      carouselIdx = idx;
    }
    indicators.forEach((btn, i) => btn.addEventListener('click', () => showCarousel(i)));
    carousel.addEventListener('keydown', e => {
      if (e.key === 'ArrowRight') showCarousel((carouselIdx + 1) % cards.length);
      if (e.key === 'ArrowLeft') showCarousel((carouselIdx - 1 + cards.length) % cards.length);
    });
    // Touch/swipe support
    let startX = null;
    carousel.addEventListener('touchstart', e => { startX = e.touches[0].clientX; });
    carousel.addEventListener('touchend', e => {
      if (startX !== null) {
        const dx = e.changedTouches[0].clientX - startX;
        if (dx > 50) showCarousel((carouselIdx - 1 + cards.length) % cards.length);
        if (dx < -50) showCarousel((carouselIdx + 1) % cards.length);
        startX = null;
      }
    });
    function autoCarousel() {
      carouselTimer = setInterval(() => showCarousel((carouselIdx + 1) % cards.length), 5000);
    }
    carousel.addEventListener('mouseenter', () => clearInterval(carouselTimer));
    carousel.addEventListener('mouseleave', autoCarousel);
    autoCarousel();
    showCarousel(0);
    // ===== FAQ Accordion (keyboard navigation) =====
    document.querySelectorAll('.faq details').forEach((d, i, arr) => {
      d.addEventListener('keydown', e => {
        if (e.key === 'ArrowDown') arr[(i + 1) % arr.length].querySelector('summary').focus();
        if (e.key === 'ArrowUp') arr[(i - 1 + arr.length) % arr.length].querySelector('summary').focus();
      });
    });
    // ===== Contact Form (honeypot, spinner, better validation, error tooltips) =====
    const form = document.getElementById('contactForm');
    if (form) {
      form.addEventListener('submit', async e => {
        e.preventDefault();
        // Remove previous errors
        form.querySelectorAll('.form-group').forEach(g => g.classList.remove('error'));
        form.querySelectorAll('.error-tooltip').forEach(t => t.textContent = '');
        const status = document.getElementById('formStatus');
        const submitBtn = form.querySelector('button[type=submit]');
        const submitText = document.getElementById('submitText');
        status.textContent = '';
        submitBtn.setAttribute('aria-busy', 'true');
        submitText.textContent = 'Sending…';
        // Honeypot
        if (form.website.value) {
          status.textContent = 'Spam detected.';
          submitBtn.setAttribute('aria-busy', 'false');
          submitText.textContent = 'Send Message';
          return;
        }
        let valid = true;
        if (!form.name.value.trim()) {
          valid = false;
          form.name.parentElement.classList.add('error');
          document.getElementById('nameError').textContent = 'Name required';
        }
        if (!form.email.value.trim()) {
          valid = false;
          form.email.parentElement.classList.add('error');
          document.getElementById('emailError').textContent = 'Email required';
        } else if (!/^[^@]+@[^@]+\.[^@]+$/.test(form.email.value.trim())) {
          valid = false;
          form.email.parentElement.classList.add('error');
          document.getElementById('emailError').textContent = 'Invalid email';
        }
        if (!form.message.value.trim()) {
          valid = false;
          form.message.parentElement.classList.add('error');
          document.getElementById('messageError').textContent = 'Message required';
        }
        if (!valid) {
          status.textContent = 'Please fix errors above.';
          submitBtn.setAttribute('aria-busy', 'false');
          submitText.textContent = 'Send Message';
          return;
        }
        const data = new FormData(form);
        try {
          const res = await fetch('https://formspree.io/f/your-id', {
            method: 'POST',
            body: data,
            headers: { Accept: 'application/json' }
          });
          if (res.ok) {
            status.textContent = 'Thank you! We will be in touch.';
            form.reset();
          } else {
            status.textContent = 'Oops! Something went wrong.';
          }
        } catch {
          status.textContent = 'Network error – please retry.';
        }
        submitBtn.setAttribute('aria-busy', 'false');
        submitText.textContent = 'Send Message';
      });
    }
    // ===== Current Year =====
    document.getElementById('year').textContent = new Date().getFullYear();
    // ===== Service Worker (versioned, offline fallback) =====
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        const code = `
          const CACHE = 'allied-v3';
          const OFFLINE_URL = '/offline.html';
          self.addEventListener('install',e=>{
            e.waitUntil(
              caches.open(CACHE).then(c=>c.addAll(['/', OFFLINE_URL]))
            );
          });
          self.addEventListener('activate',e=>{
            e.waitUntil(
              caches.keys().then(keys=>Promise.all(keys.filter(k=>k!==CACHE).map(k=>caches.delete(k))))
            );
          });
          self.addEventListener('fetch',e=>{
            e.respondWith(
              fetch(e.request).catch(()=>caches.match(e.request).then(r=>r||caches.match(OFFLINE_URL)))
            );
          });
        `;
        const blob = new Blob([code], { type: 'text/javascript' });
        navigator.serviceWorker.register(URL.createObjectURL(blob));
      });
    }
    // ===== Smooth Scroll Polyfill for legacy browsers =====
    if (!('scrollBehavior' in document.documentElement.style)) {
      const script = document.createElement('script');
      script.src = 'https://cdn.jsdelivr.net/npm/smoothscroll-polyfill@0.4.4/dist/smoothscroll.min.js';
      document.head.appendChild(script);
      script.onload = () => window.__forceSmoothScrollPolyfill__ && window.__forceSmoothScrollPolyfill__();
    }
    // ===== Chat Widget Placeholder =====
    document.getElementById('chatWidget').onclick = () => alert('Live chat coming soon!');
  </script>
</body>
</html>
