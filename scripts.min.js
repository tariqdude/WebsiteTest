function debounce(e,t=20,o=!0){let n;return function(){const r=this,a=arguments,s=o&&!n;clearTimeout(n),n=setTimeout((function(){n=null,o||e.apply(r,a)}),t),s&&e.apply(r,a)}}const header=document.getElementById("site-header");function handleHeaderShrink(){window.scrollY>100?header.classList.add("header--small"):header.classList.remove("header--small")}window.addEventListener("scroll",debounce(handleHeaderShrink,20));const menuToggle=document.getElementById("menu-toggle"),mobileNav=document.getElementById("mobile-nav");function openMobileNav(){menuToggle.setAttribute("aria-expanded","true"),mobileNav.setAttribute("aria-hidden","false"),mobileNav.classList.add("nav--open");mobileNav.querySelectorAll(".nav__item").forEach(((e,t)=>{e.style.animationDelay=.1*t+.2+"s"}))}function closeMobileNav(){menuToggle.setAttribute("aria-expanded","false"),mobileNav.setAttribute("aria-hidden","true"),mobileNav.classList.remove("nav--open")}menuToggle.addEventListener("click",(()=>{"true"===menuToggle.getAttribute("aria-expanded")?closeMobileNav():openMobileNav()})),mobileNav.querySelectorAll(".nav__link").forEach((e=>{e.addEventListener("click",closeMobileNav)})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&"true"===menuToggle.getAttribute("aria-expanded")&&closeMobileNav()}));const sections=document.querySelectorAll("section[id]"),navLinks=document.querySelectorAll(".nav__link");function highlightNav(){let e=window.scrollY+window.innerHeight/3;sections.forEach((t=>{if(e>=t.offsetTop&&e<t.offsetTop+t.offsetHeight){const e=t.getAttribute("id");navLinks.forEach((t=>{t.classList.toggle("nav__link--active",t.getAttribute("href")===`#${e}`)}))}}))}window.addEventListener("scroll",debounce(highlightNav,20));const backToTopBtn=document.getElementById("backToTop"),scrollProgress=document.getElementById("scrollProgress");function handleScrollUI(){window.scrollY>800?backToTopBtn.classList.add("back-to-top--visible"):backToTopBtn.classList.remove("back-to-top--visible");const e=document.documentElement.scrollHeight-window.innerHeight,t=window.scrollY/e*100;scrollProgress.style.width=`${t}%`}window.addEventListener("scroll",debounce(handleScrollUI,20)),backToTopBtn.addEventListener("click",(()=>{window.scrollTo({top:0,behavior:"smooth"})}));const filterButtons=document.querySelectorAll(".filter-btn"),projectCards=document.querySelectorAll(".project-card");function initScrollAnimations(){const e=document.querySelectorAll(".animate-on-scroll"),t=new IntersectionObserver(((e,t)=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add("animated"),t.unobserve(e.target))}))}),{root:null,rootMargin:"0px",threshold:.2});e.forEach((e=>t.observe(e)))}function initLazyLoad(){const e=document.querySelectorAll('img[loading="lazy"]'),t=document.querySelectorAll("[data-bg]"),o=new IntersectionObserver(((e,t)=>{e.forEach((e=>{if(e.isIntersecting){const o=e.target;"IMG"===o.tagName&&o.dataset.src?(o.src=o.dataset.src,o.dataset.srcset&&(o.srcset=o.dataset.srcset),o.removeAttribute("loading")):o.dataset.bg&&(o.style.backgroundImage=`url('${o.dataset.bg}')`,o.removeAttribute("data-bg")),t.unobserve(o)}}))}),{root:null,rootMargin:"0px 0px 200px 0px",threshold:.1});e.forEach((e=>o.observe(e))),t.forEach((e=>o.observe(e)))}function initCarousel(){const e=document.querySelector(".carousel__track"),t=Array.from(e.children),o=document.querySelector(".carousel__prev"),n=document.querySelector(".carousel__next"),r=document.querySelector(".carousel__indicators"),a=Array.from(r.children);let s,i=0;function c(e){t.forEach(((t,o)=>{t.classList.toggle("carousel__slide--active",o===e),t.setAttribute("aria-hidden",o===e?"false":"true")})),a.forEach(((t,o)=>{t.classList.toggle("carousel__indicator--active",o===e)}))}function l(){i=(i+1)%t.length,c(i)}function d(){i=(i-1+t.length)%t.length,c(i)}function u(){s=setInterval(l,5e3)}function m(){clearInterval(s),u()}n.addEventListener("click",(()=>{l(),m()})),o.addEventListener("click",(()=>{d(),m()})),a.forEach(((e,t)=>{e.addEventListener("click",(()=>{i=t,c(i),m()}))}));const g=document.querySelector(".testimonials__carousel");g.addEventListener("mouseenter",(()=>clearInterval(s))),g.addEventListener("mouseleave",(()=>u())),g.addEventListener("focusin",(()=>clearInterval(s))),g.addEventListener("focusout",(()=>u())),g.addEventListener("keydown",(e=>{"ArrowRight"===e.key?(l(),m()):"ArrowLeft"===e.key&&(d(),m())})),c(i),u()}filterButtons.forEach((e=>{e.addEventListener("click",(()=>{filterButtons.forEach((e=>e.classList.remove("filter-btn--active"))),e.classList.add("filter-btn--active");const t=e.getAttribute("data-filter");projectCards.forEach((e=>{const o=e.getAttribute("data-category");"all"===t||o===t?(e.style.display="block",e.classList.remove("filtered-out")):(e.style.display="none",e.classList.add("filtered-out"))}))}))}));const contactForm=document.getElementById("contactForm"),formMessage=document.getElementById("formMessage");function showError(e,t){document.getElementById(`${e.id}Error`).textContent=t,e.setAttribute("aria-invalid","true")}function clearError(e){document.getElementById(`${e.id}Error`).textContent="",e.removeAttribute("aria-invalid")}function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(e).toLowerCase())}contactForm.addEventListener("submit",(async e=>{e.preventDefault();let t=!0;const o=contactForm.querySelector("#name"),n=contactForm.querySelector("#email"),r=contactForm.querySelector("#phone"),a=contactForm.querySelector("#details");if([o,n,r,a].forEach(clearError),formMessage.textContent="",formMessage.className="form__message",o.value.trim()||(showError(o,"Please enter your name."),t=!1),n.value.trim()?validateEmail(n.value.trim())||(showError(n,"Please enter a valid email address."),t=!1):(showError(n,"Please enter your email."),t=!1),r.value.trim()){/^[0-9\-+()\s]{7,20}$/.test(r.value.trim())||(showError(r,"Please enter a valid phone number."),t=!1)}if(a.value.trim()||(showError(a,"Please provide project details."),t=!1),!t)return;const s={name:o.value.trim(),email:n.value.trim(),phone:r.value.trim(),details:a.value.trim()};try{if(!(await fetch("https://formspree.io/f/mayvklpw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok)throw new Error("Network response was not OK");formMessage.textContent="Thank you! Your message has been sent.",formMessage.classList.add("success"),contactForm.reset(),o.focus()}catch(e){formMessage.textContent="Oops! Something went wrong. Please try again later.",formMessage.classList.add("error")}}));const cookieBanner=document.getElementById("cookieConsent"),acceptCookiesBtn=document.getElementById("acceptCookies");function setCookie(e,t,o){const n=new Date(Date.now()+864e5*o).toUTCString();document.cookie=e+"="+encodeURIComponent(t)+"; expires="+n+"; path=/"}function getCookie(e){return document.cookie.split("; ").reduce(((t,o)=>{const n=o.split("=");return n[0]===e?decodeURIComponent(n[1]):t}),"")}function checkCookieConsent(){"true"!==getCookie("cookieConsent")&&cookieBanner.classList.add("show")}acceptCookiesBtn.addEventListener("click",(()=>{setCookie("cookieConsent","true",365),cookieBanner.classList.remove("show")})),document.addEventListener("DOMContentLoaded",(()=>{checkCookieConsent()})),document.addEventListener("DOMContentLoaded",(()=>{initScrollAnimations(),initLazyLoad(),initCarousel();const e=document.getElementById("theme-toggle"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,o=localStorage.getItem("theme")||(t?"dark":"light");document.documentElement.setAttribute("data-theme",o),e.setAttribute("aria-checked","dark"===o?"true":"false"),e.addEventListener("click",(()=>{const t="dark"===document.documentElement.getAttribute("data-theme")?"light":"dark";document.documentElement.setAttribute("data-theme",t),localStorage.setItem("theme",t),e.setAttribute("aria-checked","dark"===t?"true":"false")}))}));
